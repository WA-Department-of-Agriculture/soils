<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="soils">
<title>Write Soil Health Reports • soils</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Poppins-0.4.7/font.css" rel="stylesheet">
<link href="../deps/Lato-0.4.7/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Write Soil Health Reports">
<meta property="og:description" content="soils">
<meta property="og:image" content="https://wa-department-of-agriculture.github.io/soils/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">soils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Get Started</h6>
    <a class="dropdown-item" href="../articles/project.html">Create a New Template Project</a>
    <a class="dropdown-item" href="../articles/report.html">Write Soil Health Reports</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Example Reports</h6>
    <a class="dropdown-item" href="../articles/docx.html">MS Word Reports</a>
    <a class="dropdown-item" href="../articles/html.html">HTML Reports</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/WA-Department-of-Agriculture/soils/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Write Soil Health Reports</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/WA-Department-of-Agriculture/soils/blob/HEAD/vignettes/report.Rmd" class="external-link"><code>vignettes/report.Rmd</code></a></small>
      <div class="d-none name"><code>report.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="quarto-and-markdown-basics">Quarto and Markdown Basics<a class="anchor" aria-label="anchor" href="#quarto-and-markdown-basics"></a>
</h2>
<p>If you’re new to Quarto or markdown, first check out these <a href="https://quarto.org/docs/get-started/hello/rstudio.html" class="external-link">tutorials</a>
and <a href="https://quarto.org/docs/authoring/markdown-basics.html" class="external-link">markdown
basics guide</a>.</p>
</div>
<div class="section level2">
<h2 id="file-paths">File Paths<a class="anchor" aria-label="anchor" href="#file-paths"></a>
</h2>
<p>File paths can be tricky, especially when working in files that use
or source other files in different folders. We use
<code><a href="https://here.r-lib.org//reference/here.html" class="external-link">here::here()</a></code> to build the file path relative to the
directory where the <code>.Rproj</code> file is located. We
<strong>strongly</strong> recommend using the <a href="https://here.r-lib.org/" class="external-link"><code>here</code></a> package to avoid
file path issues.</p>
</div>
<div class="section level2">
<h2 id="washi-theme">
<code>washi</code> Theme<a class="anchor" aria-label="anchor" href="#washi-theme"></a>
</h2>
<p>Default fonts and colors within <code>soils</code> come from the <a href="https://washingtonsoilhealthinitiative.com/" class="external-link">Washington Soil
Health Initiative</a> (WaSHI) branding package <a href="https://wa-department-of-agriculture.github.io/washi/" class="external-link"><code>washi</code></a>.
This allows you to create beautiful plots, tables, and reports out of
the box. You can customize the fonts and colors to match your own
branding by modifying the <code>soils</code> functions, style sheets,
and report templates.</p>
<p>To install, import, and register the <code>washi</code> default
fonts, follow these <a href="https://wa-department-of-agriculture.github.io/washi/#requirements." class="external-link">instructions</a>.
<a href="https://fonts.google.com/specimen/Lato?query=lato" class="external-link">Lato</a> is
used for headings and <a href="https://fonts.google.com/specimen/Poppins?query=poppins" class="external-link">Poppins</a>
for body text.</p>
</div>
<div class="section level2">
<h2 id="project-structure">Project Structure<a class="anchor" aria-label="anchor" href="#project-structure"></a>
</h2>
<p>Let’s begin by familiarizing ourselves with the project structure and
which files to edit or add. Look for the <strong>bolded
statements</strong> for where you will need to edit or add files. How
you should add or edit files is described in the later sections:
<strong>1)</strong> Import Data, <strong>2)</strong> Write and Edit,
<strong>3)</strong> Render Your Reports, and <strong>4)</strong> Final
Edits and Sendoff.</p>
<div class="section level3">
<h3 id="inst">
<code>inst</code><a class="anchor" aria-label="anchor" href="#inst"></a>
</h3>
<p>This folder contains all the Quarto report template files, images,
style sheets, and example data that are bundled with the
<code>soils</code> package.</p>
<div class="section level4">
<h4 id="qmd-files">
<code>.qmd</code> files<a class="anchor" aria-label="anchor" href="#qmd-files"></a>
</h4>
<p>At the top level, there are eight Quarto files. The first is the main
document, called <code>producer_report.qmd</code>, which references
child documents to be knitted and input in this main document. The child
documents are prefixed with an underscore and named in sequential order
to when they appear in the parent document. <strong>Edit each of these
documents</strong> to suit your project.</p>
<pre><code>├── inst
│   ├── producer_report.qmd
│   ├── _01_project_summary.qmd
│   ├── _02_soil_health_background.qmd
│   ├── _03_physical_measurements.qmd
│   ├── _04_biological_measurements.qmd
│   ├── _05_chemical_measurements.qmd
│   ├── _06_looking_forward.qmd
│   └── _07_acknowledgement.qmd</code></pre>
<p>Child documents allow us to reuse content without copying and
pasting. Use the same project summary in other reports by using the
<code>{{&lt; include &gt;}}</code> <a href="https://quarto.org/docs/authoring/includes.html" class="external-link">shortcode</a>.
When it’s time to update the summary, you only have edit in one
place.</p>
<pre><code># Our Project Summary

{{&lt; include _01_project_summary.qmd &gt;}}

More content here...</code></pre>
</div>
<div class="section level4">
<h4 id="extdata">
<code>extdata</code><a class="anchor" aria-label="anchor" href="#extdata"></a>
</h4>
<p>This is where example data live, and where your data need to go.
<strong>Add your data set and data dictionary</strong> to this folder
for processing in the <code>data_wrangling.R</code> script. The file
names in <code>extdata</code> must match the script.</p>
<p>The files with <code>*</code> contain wrangled data used in the
function <a href="https://wa-department-of-agriculture.github.io/soils/reference/make_plotly.html#ref-examples">examples</a>.
They demonstrate what the input data must look like for
<code>soils</code> visualization functions. You do not need to edit or
add your own data to these files.</p>
<pre><code>├── inst
│   ├── extdata
│   │   ├── dataDictionary.csv
│   │   ├── dfPlot.csv*
│   │   ├── dfTexture.csv*
│   │   ├── exampleData.csv
│   │   ├── headers.RDS*
│   │   └── tables.RDS*</code></pre>
</div>
<div class="section level4">
<h4 id="images">
<code>images</code><a class="anchor" aria-label="anchor" href="#images"></a>
</h4>
<p>This folder contains images you want to include in your report. See
more <a href="https://quarto.org/docs/authoring/figures.html" class="external-link">info</a>
on including images in Quarto. <strong>Replace <code>logo.png</code>
with your own</strong>.</p>
<pre><code>├── inst
│   ├── images
│   │   ├── biological.png
│   │   ├── chemical.png
│   │   ├── logo.png
│   │   └── physical.png</code></pre>
<p>Use the following syntax to include an image in the report:</p>
<pre><code>![](images/chemical.png){height="50px"}</code></pre>
</div>
<div class="section level4">
<h4 id="resources">
<code>resources</code><a class="anchor" aria-label="anchor" href="#resources"></a>
</h4>
<p>Style sheets are used to customize the appearance of the reports.
<code>styles.css</code> is for <code>.html</code> output and
<code>word-template.docx</code> is for <code>.docx</code> output.</p>
<pre><code>├── inst
│   ├── resources
│   │   ├── styles.css
│   │   └── word-template.docx</code></pre>
<p><strong>Open these files and modify the fonts and colors</strong> to
match your own branding. Learn more about <a href="https://quarto.org/docs/visual-editor/content.html#css-styles" class="external-link">Cascading
Style Sheets (CSS)</a> and <a href="https://quarto.org/docs/output-formats/ms-word-templates.html" class="external-link">MS
Word Style Templates</a>.</p>
</div>
</div>
<div class="section level3">
<h3 id="r">
<code>R</code><a class="anchor" aria-label="anchor" href="#r"></a>
</h3>
<p>The <code>R</code> folder holds the <code>data_wrangling.R</code>
script that gets sourced in <code>producer_report.qmd</code>. The other
scripts contain <code>soils</code> source code for the visualization
functions. The data inputs to these functions require the processing
from <code>data_wrangling.R</code>.</p>
<pre><code>└── R
    ├── data_wrangling.R
    ├── helpers.R
    ├── map.R
    ├── plots.R
    ├── render.R
    └── tables.R</code></pre>
<p>Optionally, <strong>modify these functions</strong> to better suit
your data and reporting needs. For example, you could change the font
and color default arguments from the <a href="https://github.com/WA-Department-of-Agriculture/washi" class="external-link">washi</a> branding
package to your own organization’s theme.
<code>producer_report.qmd</code> uses the built-in <code>soils</code>
functions, so you need to source the modified R scripts in the
<code>.qmd</code> document. To avoid confusion, you should also rename
your modified function in the R script and in the <code>.qmd</code>
document.</p>
</div>
</div>
<div class="section level2">
<h2 id="import-data">1) Import Data<a class="anchor" aria-label="anchor" href="#import-data"></a>
</h2>
<p><code>soils</code> includes an example data set and data dictionary
to use as templates. These files also automatically loaded when you call
<code><a href="https://github.com/WA-Department-of-Agriculture/soils" class="external-link">library(soils)</a></code>, but also are found in the
<code>inst/extdata</code> folder. They allow you to try out the
visualization functions and report rendering immediately after
installing <code>soils</code> on your machine.</p>
<div class="section level3">
<h3 id="project-data">Project Data<a class="anchor" aria-label="anchor" href="#project-data"></a>
</h3>
<p>Glimpse at the example data structure:</p>
<details open><summary>
Example Data
</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/WA-Department-of-Agriculture/soils" class="external-link">soils</a></span><span class="op">)</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">exampleData</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 100</span></span>
<span><span class="co">#&gt; Columns: 51</span></span>
<span><span class="co">#&gt; $ year                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2023, 2022, 2022, 2022, 2023, 2022, 2023, 2022, …</span></span>
<span><span class="co">#&gt; $ sampleId              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "23-WUY05-01", "22-RHM05-02", "22-ENR07-02", "22…</span></span>
<span><span class="co">#&gt; $ farmName              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Farm 150", "Farm 085", "Farm 058", "Farm 061", …</span></span>
<span><span class="co">#&gt; $ producerName          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Shanna", "Warren", "Alecia", "Samantha", "Shann…</span></span>
<span><span class="co">#&gt; $ producerId            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "WUY05", "RHM05", "ENR07", "ZTD04", "WUY05", "BK…</span></span>
<span><span class="co">#&gt; $ fieldName             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Field 01", "Field 02", "Field 02", "Field 03", …</span></span>
<span><span class="co">#&gt; $ fieldId               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 2, 2, 3, 3, 2, 1, 2, 1, 1, 1, 1, 2, 8, 2, 1, …</span></span>
<span><span class="co">#&gt; $ county                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "County 9", "County 18", "County 11", "County 13…</span></span>
<span><span class="co">#&gt; $ crop                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Hay/Silage", "Green Manure", "Vegetable", "Herb…</span></span>
<span><span class="co">#&gt; $ texture               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Loamy Sand", "Sandy Loam", "Silt Loam", "Silt L…</span></span>
<span><span class="co">#&gt; $ `24hrminC_mgC.kg.day` <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> NA, NA, NA, 0.14, NA, NA, NA, NA, NA, NA, NA, NA…</span></span>
<span><span class="co">#&gt; $ bd_g.cm3              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.30, 0.88, 1.21, 1.37, 1.22, 1.14, 1.44, 1.24, …</span></span>
<span><span class="co">#&gt; $ pmN_lbs.ac            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 67.13, 129.97, 122.17, 95.24, 111.35, 61.92, -77…</span></span>
<span><span class="co">#&gt; $ ammN_mg.kg            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.6, 21.6, 8.1, 13.8, 3.9, 12.4, 2.4, 12.4, 2.3,…</span></span>
<span><span class="co">#&gt; $ nitrateN_mg.kg        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 9.2, 6.1, 25.3, 16.9, 6.7, 4.3, 21.5, 7.4, 2.3, …</span></span>
<span><span class="co">#&gt; $ pmN_mg.kg             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 19.0, 54.1, 37.0, 25.6, 33.6, 20.0, -19.9, 33.6,…</span></span>
<span><span class="co">#&gt; $ poxC_mg.kg            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 496, 571, 419, 424, 547, 235, 501, 480, 965, 105…</span></span>
<span><span class="co">#&gt; $ pH                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 6.7, 5.9, 6.3, 6.8, 7.6, 5.5, 5.5, 5.9, 6.3, 6.0…</span></span>
<span><span class="co">#&gt; $ EC_mmhos.cm           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.42, 0.05, 0.60, 2.18, 0.60, 0.81, 0.55, 0.34, …</span></span>
<span><span class="co">#&gt; $ K_mg.kg               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 498, 198, 294, 229, 273, 372, 289, 355, 253, 733…</span></span>
<span><span class="co">#&gt; $ Ca_mg.kg              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1380, 780, 1760, 3380, 2820, 1480, 1140, 2080, 2…</span></span>
<span><span class="co">#&gt; $ Mg_mg.kg              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 145.2, 96.8, 266.2, 738.1, 193.6, 229.9, 133.1, …</span></span>
<span><span class="co">#&gt; $ Na_mg.kg              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 16.1, 20.7, 20.7, 80.5, 13.8, 16.1, 23.0, 16.1, …</span></span>
<span><span class="co">#&gt; $ CEC_meq.100g          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 7.8, 10.5, 13.0, 14.4, 10.1, 12.4, 12.9, 14.8, 1…</span></span>
<span><span class="co">#&gt; $ B_mg.kg               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.22, 0.09, 0.41, 0.72, 0.25, 0.18, 0.12, 0.21, …</span></span>
<span><span class="co">#&gt; $ Cu_mg.kg              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.6, 0.4, 4.2, 1.1, 0.7, 1.0, 0.5, 1.4, 1.1, 0.5…</span></span>
<span><span class="co">#&gt; $ Fe_mg.kg              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 26, 28, 141, 37, 15, 64, 44, 85, 129, 31, 86, 38…</span></span>
<span><span class="co">#&gt; $ Mn_mg.kg              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.5, 2.7, 4.1, 11.5, 1.7, 9.0, 4.4, 17.1, 9.9, 1…</span></span>
<span><span class="co">#&gt; $ S_mg.kg               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 4.29, 9.41, 26.73, 51.70, 3.29, 4.51, 9.13, 8.26…</span></span>
<span><span class="co">#&gt; $ Zn_mg.kg              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.7, 0.8, 4.2, 2.4, 0.8, 0.5, 34.0, 0.9, 7.8, 0.…</span></span>
<span><span class="co">#&gt; $ `totalC_%`            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.85, 2.88, 1.68, 1.40, 1.65, 1.55, 2.25, 2.37, …</span></span>
<span><span class="co">#&gt; $ `totalN_%`            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.16, 0.18, 0.14, 0.12, 0.16, 0.13, 0.15, 0.17, …</span></span>
<span><span class="co">#&gt; $ ace_g.protein.kg.soil <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 6.74, 21.50, 10.90, 5.53, 4.20, 10.30, 7.73, 6.8…</span></span>
<span><span class="co">#&gt; $ `sand_%`              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 44, 69, 11, 36, 64, 24, 80, 22, 62, 48, 80, 69, …</span></span>
<span><span class="co">#&gt; $ `silt_%`              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 23, 21, 79, 51, 33, 62, 16, 57, 26, 45, 14, 27, …</span></span>
<span><span class="co">#&gt; $ `clay_%`              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 3, 10, 10, 13, 3, 14, 4, 21, 12, 7, 6, 4, 10, 13…</span></span>
<span><span class="co">#&gt; $ `96hrminC_mgC.kg.day` <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 35.60, 30.00, 15.00, 67.50, 50.60, 25.50, 30.60,…</span></span>
<span><span class="co">#&gt; $ olsenP_mg.kg          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 15, 37, 73, 30, 8, 33, 27, 29, 40, 16, 19, 11, 1…</span></span>
<span><span class="co">#&gt; $ `wsa_%`               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 88.5, 92.6, 91.3, 94.3, 84.6, 86.6, 86.9, 82.5, …</span></span>
<span><span class="co">#&gt; $ `OM_%`                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 4.5, 5.8, 2.4, 2.9, 6.7, 3.2, 27.0, 4.2, 7.9, 5.…</span></span>
<span><span class="co">#&gt; $ `TOC_%`               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.85, 2.88, 1.68, 1.40, 1.53, 1.55, 2.25, 2.37, …</span></span>
<span><span class="co">#&gt; $ Ca_cmolc.kg           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 6.9, 3.9, 8.8, 16.9, 14.1, 7.4, 5.7, 10.4, 13.4,…</span></span>
<span><span class="co">#&gt; $ Mg_cmolc.kg           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.2, 0.8, 2.2, 6.1, 1.6, 1.9, 1.1, 1.9, 3.5, 0.9…</span></span>
<span><span class="co">#&gt; $ Na_cmolc.kg           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.07, 0.09, 0.09, 0.35, 0.06, 0.07, 0.10, 0.07, …</span></span>
<span><span class="co">#&gt; $ WHC_in.ft             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.01, 1.08, 2.77, 1.93, 1.28, 2.25, 0.84, 2.14, …</span></span>
<span><span class="co">#&gt; $ `moisture_%`          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 17.53, 33.10, 27.97, 25.27, 17.65, 25.97, 14.06,…</span></span>
<span><span class="co">#&gt; $ `inorganicC_%`        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> NA, NA, NA, NA, 0.12, NA, NA, NA, NA, NA, NA, NA…</span></span>
<span><span class="co">#&gt; $ `pmN_nitrateN _mg.kg` <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 29.0, NA, NA, NA, 42.7, NA, 1.1, NA, 124.0, NA, …</span></span>
<span><span class="co">#&gt; $ pmN_ammN_mg.kg        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.8, NA, NA, NA, 1.5, NA, 2.9, NA, 0.7, NA, 14.4…</span></span>
<span><span class="co">#&gt; $ longitude             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> -119, -123, -122, -120, -119, -117, -118, -117, …</span></span>
<span><span class="co">#&gt; $ latitude              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 49, 47, 47, 46, 49, 47, 49, 47, 48, 48, 46, 47, …</span></span></code></pre></div>
</details><p>All column names in your data, besides the measurements, must be
exactly the same as above. If the column names differ, use
<code>Ctrl + Shift + F</code> to find and replace the hard-coded values
throughout the <code>.qmd</code> files and <code>.R</code> scripts.</p>
<p>Each measurement must be in its own column. These measurement column
names must match the <code>column_name</code> in your data
dictionary.</p>
</div>
<div class="section level3">
<h3 id="data-dictionary">Data Dictionary<a class="anchor" aria-label="anchor" href="#data-dictionary"></a>
</h3>
<p>The data dictionary is used to group and order the measurements, as
well as provide nicely formatted labels for display in tables and plots.
The example data dictionary contains <code>UTF-8</code> superscripts and
subscripts and is saved with this specific encoding.</p>
<div class="figure">
<img src="images/utf-8.png" alt=""><p class="caption">Data dictionary is saved as
<code>CSV UTF-8 (Comma delimited) (*.csv)</code> in MS Excel</p>
</div>
<p>Your data dictionary must have the exact same column names as the
example:</p>
<details open><summary>
Example Data Dictionary
</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">dataDictionary</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 32</span></span>
<span><span class="co">#&gt; Columns: 8</span></span>
<span><span class="co">#&gt; $ measurement_group       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "biological", "biological", "biological", "bio…</span></span>
<span><span class="co">#&gt; $ measurement_group_label <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Biological", "Biological", "Biological", "Bio…</span></span>
<span><span class="co">#&gt; $ column_name             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "OM_%", "96hrminC_mgC.kg.day", "poxC_mg.kg", "…</span></span>
<span><span class="co">#&gt; $ measurement_full_name   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Organic Matter", "Potentially Mineralizable C…</span></span>
<span><span class="co">#&gt; $ order                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 2, 3, 4, 5, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5…</span></span>
<span><span class="co">#&gt; $ abbr                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Organic Matter", "Min C", "POXC", "PMN", "ACE…</span></span>
<span><span class="co">#&gt; $ unit                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "%", "mg/kg/day", "ppm", "lbs/ac", "g/kg", "",…</span></span>
<span><span class="co">#&gt; $ abbr_unit               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Organic Matter&lt;br&gt;(%)", "Min C&lt;br&gt;(mg/kg/day)…</span></span>
<span></span>
<span><span class="va">dataDictionary</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># Removing this very wide column to better show the other columns</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">measurement_full_name</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># Show just the top 3 measurements in each `measurement_group`</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span></span>
<span>    n <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    by <span class="op">=</span> <span class="va">measurement_group</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt;    measurement_group         measurement_group_label         column_name order</span></span>
<span><span class="co">#&gt; 1         biological                      Biological                OM_%     1</span></span>
<span><span class="co">#&gt; 2         biological                      Biological 96hrminC_mgC.kg.day     2</span></span>
<span><span class="co">#&gt; 3         biological                      Biological          poxC_mg.kg     3</span></span>
<span><span class="co">#&gt; 4           chemical                        Chemical                  pH     1</span></span>
<span><span class="co">#&gt; 5           chemical                        Chemical         EC_mmhos.cm     2</span></span>
<span><span class="co">#&gt; 6           chemical                        Chemical        CEC_meq.100g     3</span></span>
<span><span class="co">#&gt; 7              macro Plant Essential Macro Nutrients            totalN_%     1</span></span>
<span><span class="co">#&gt; 8              macro Plant Essential Macro Nutrients      nitrateN_mg.kg     2</span></span>
<span><span class="co">#&gt; 9              macro Plant Essential Macro Nutrients          ammN_mg.kg     3</span></span>
<span><span class="co">#&gt; 10             micro Plant Essential Micro Nutrients             B_mg.kg     1</span></span>
<span><span class="co">#&gt; 11             micro Plant Essential Micro Nutrients            Fe_mg.kg     2</span></span>
<span><span class="co">#&gt; 12             micro Plant Essential Micro Nutrients            Mn_mg.kg     3</span></span>
<span><span class="co">#&gt; 13          physical                        Physical             texture     1</span></span>
<span><span class="co">#&gt; 14          physical                        Physical              sand_%     1</span></span>
<span><span class="co">#&gt; 15          physical                        Physical              silt_%     2</span></span>
<span><span class="co">#&gt;              abbr      unit             abbr_unit</span></span>
<span><span class="co">#&gt; 1  Organic Matter         % Organic Matter&lt;br&gt;(%)</span></span>
<span><span class="co">#&gt; 2           Min C mg/kg/day  Min C&lt;br&gt;(mg/kg/day)</span></span>
<span><span class="co">#&gt; 3            POXC       ppm         POXC&lt;br&gt;(ppm)</span></span>
<span><span class="co">#&gt; 4              pH                              pH</span></span>
<span><span class="co">#&gt; 5              EC  mmhos/cm      EC&lt;br&gt;(mmhos/cm)</span></span>
<span><span class="co">#&gt; 6             CEC  cmolc/kg     CEC&lt;br&gt;(cmolc/kg)</span></span>
<span><span class="co">#&gt; 7         Total N         %        Total N&lt;br&gt;(%)</span></span>
<span><span class="co">#&gt; 8             NO₃       ppm          NO₃&lt;br&gt;(ppm)</span></span>
<span><span class="co">#&gt; 9           NH₄-N       ppm        NH₄-N&lt;br&gt;(ppm)</span></span>
<span><span class="co">#&gt; 10              B       ppm            B&lt;br&gt;(ppm)</span></span>
<span><span class="co">#&gt; 11             Fe       ppm           Fe&lt;br&gt;(ppm)</span></span>
<span><span class="co">#&gt; 12             Mn       ppm           Mn&lt;br&gt;(ppm)</span></span>
<span><span class="co">#&gt; 13        Texture                         Texture</span></span>
<span><span class="co">#&gt; 14           Sand         %           Sand&lt;br&gt;(%)</span></span>
<span><span class="co">#&gt; 15           Silt         %           Silt&lt;br&gt;(%)</span></span></code></pre></div>
</details><ul>
<li>
<code>measurement_group</code> determines how the measurements are
grouped.</li>
<li>
<code>order</code> column specifies the order in which the
measurements appear in each measurement group’s tables and plots.</li>
<li>
<code>column_name</code> is the join key for joining with your
project data.</li>
<li>
<code>abbr</code> and <code>unit</code> are how the measurements are
represented in <code>flextable</code> tables.</li>
<li>
<code>abbr_unit</code> is formatted with HTML line breaks for
<code>ggplot2</code> plots.</li>
</ul>
</div>
<div class="section level3">
<h3 id="data_wrangling-r">
<code>data_wrangling.R</code><a class="anchor" aria-label="anchor" href="#data_wrangling-r"></a>
</h3>
<p>Once your project data and data dictionary files are in the
<code>inst/extdata</code> folder, edit <code>data_wrangling.R</code>
with your file names:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load lab results</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/inst/extdata/YOUR-FILE-NAME.csv"</span><span class="op">)</span>,</span>
<span>  check.names <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data dictionary for pretty labels</span></span>
<span><span class="va">dictionary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/inst/extdata/YOUR-FILE-NAME.csv"</span><span class="op">)</span>,</span>
<span>  <span class="co"># This encoding part is important for R to correctly read the</span></span>
<span>  <span class="co"># subscripts and superscripts.</span></span>
<span>  encoding <span class="op">=</span> <span class="st">"UTF-8"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>You may need to switch the function from <code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv()</a></code> if
your files are in a different format.</p>
</div>
</div>
<div class="section level2">
<h2 id="write-and-edit">2) Write and Edit<a class="anchor" aria-label="anchor" href="#write-and-edit"></a>
</h2>
<p>Almost all Quarto report template files, images, style sheets, and
example data that are bundled with the <code>soils</code> package should
be edited for your project.</p>
<div class="section level3">
<h3 id="report-metadata-and-options">Report Metadata and Options<a class="anchor" aria-label="anchor" href="#report-metadata-and-options"></a>
</h3>
<p>The report metadata and options are controlled with the YAML and
setup chunk in <code>producer_report.qmd</code>.</p>
<div class="section level4">
<h4 id="yaml">YAML<a class="anchor" aria-label="anchor" href="#yaml"></a>
</h4>
<p>The first place to start is the YAML (Yet Another Markup Language).
The YAML header is the content sandwiched between three dashes
(<code>---</code>) at the top of the file. It contains document
metadata, parameters, and customization options.</p>
<p>The only fields you need to edit are:</p>
<ul>
<li>
<code>title</code>: The title of the report. Optionally include your
logo above.</li>
<li>
<code>subtitle</code>: Subtitle appears below the title.</li>
<li>
<code>producerId</code> and <code>year</code>: Default parameter
values that can be found in your data.</li>
</ul>
<pre><code>---
title: "![](images/logo.png) Results from the State of the Soils"
subtitle: "Fall 2023"
params:
  producerId: WUY05
  year: 2023
---</code></pre>
<p>Ignore the other YAML fields and values until you would like to
explore other ways of customizing your reports. Learn about the
available YAML fields for <a href="https://quarto.org/docs/reference/formats/html.html" class="external-link">HTML
documents</a> and <a href="https://quarto.org/docs/reference/formats/docx.html" class="external-link">MS Word
documents</a>.</p>
</div>
<div class="section level4">
<h4 id="setup-chunk">Setup Chunk<a class="anchor" aria-label="anchor" href="#setup-chunk"></a>
</h4>
<p>You shouldn’t need to modify this chunk unless you want to load
additional libraries for your analyses or visualizations.</p>
<p>Notice the use of <code><a href="https://here.r-lib.org//reference/here.html" class="external-link">here::here()</a></code> to manage file paths.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wch/extrafont" class="external-link">extrafont</a></span><span class="op">)</span> <span class="co"># Register Poppins and Lato fonts for use in R</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/WA-Department-of-Agriculture/washi" class="external-link">washi</a></span><span class="op">)</span> <span class="co"># For flextable and ggplot styles</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/WA-Department-of-Agriculture/soils" class="external-link">soils</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get output file type</span></span>
<span><span class="va">out_type</span> <span class="op">&lt;-</span> <span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_knit.html" class="external-link">opts_knit</a></span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"rmarkdown.pandoc.to"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set path for saving figure output</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst/figure_output/"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create figure output directory if needed</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Run data wrangling script for current producer and year</span></span>
<span><span class="va">producerId</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">$</span><span class="va">producerId</span></span>
<span><span class="va">year</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">$</span><span class="va">year</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"R/data_wrangling.R"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><code>out_type</code> is used for determining which chunks should be
evaluated, depending on whether the report is being rendered to
<code>.html</code> or <code>.docx</code>.</p>
<p><code>path</code> is where generated figures are stored and
referenced into the report.</p>
<p><code>data_wrangling.R</code> is sourced with the current
<code>producerId</code> and <code>year</code> parameters in the
<code>.qmd</code> environment. It will error if these parameters are not
found in your data.</p>
</div>
</div>
<div class="section level3">
<h3 id="report-content">Report Content<a class="anchor" aria-label="anchor" href="#report-content"></a>
</h3>
<p><code>producer_report.qmd</code> has a section for
<code>measurement_group</code> value, as defined in the
<code>dataDictionary.csv</code>. These values are hard coded – if your
project uses different groupings, edit or remove each instance in the
<code>.qmd</code> files accordingly.</p>
<p>Each measurement group has various chunks for generating static or
interactive tables and plots, depending on whether the report is
rendering to <code>.docx</code> or <code>.html</code>.</p>
<p>These chunks have specific execution options:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r physical-plot-html}</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="in">#| eval: !expr out_type == "html"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="in">make_plotly(groups$physical)</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>Edit, add, or remove the child documents and images to suit your
project. We included placeholder text to make it easier to find
project-specific information.</p>
<p>Use <code>Ctrl + Shift + F</code> to search all files for
<code>EDIT:</code> and <code>[INSERT</code>.</p>
</div>
<div class="section level3">
<h3 id="theme">Theme<a class="anchor" aria-label="anchor" href="#theme"></a>
</h3>
<div class="section level4">
<h4 id="style-sheets">Style Sheets<a class="anchor" aria-label="anchor" href="#style-sheets"></a>
</h4>
<p>The style sheets can be found in the <code>inst/resources</code>
directory and edited to customize the report appearance to match your
own branding.</p>
<div class="section level5">
<h5 id="html">HTML<a class="anchor" aria-label="anchor" href="#html"></a>
</h5>
<p><code>styles.css</code> controls the appearance of HTML reports.</p>
<pre><code>/* Edit these :root variables */
:root {
    --primary-color: #023B2C;
    --secondary-color: #335c67;
    --link-color: #a60f2d;
    --heading-font: "Lato"
    --body-font: "Poppins"
}</code></pre>
</div>
<div class="section level5">
<h5 id="ms-word">MS Word<a class="anchor" aria-label="anchor" href="#ms-word"></a>
</h5>
<p>Open <code>word-template.docx</code> and modify the styles according
to this <a href="https://support.microsoft.com/en-gb/office/customize-or-create-new-styles-d38d6e47-f6fc-48eb-a607-1eb120dec563" class="external-link">Microsoft
documentation</a>.</p>
<p>Learn more about <a href="https://quarto.org/docs/visual-editor/content.html#css-styles" class="external-link">CSS</a>
and <a href="https://quarto.org/docs/output-formats/ms-word-templates.html" class="external-link">MS
Word Style Templates</a>.</p>
</div>
</div>
<div class="section level4">
<h4 id="r-functions">R Functions<a class="anchor" aria-label="anchor" href="#r-functions"></a>
</h4>
<p>Edit <code>tables.R</code>, <code>plots.R</code>, and
<code>map.R</code> from <code>washi</code> default fonts and colors to
your own organization’s. Modify these functions to better suit your data
and reporting needs. You will need to source the modified R scripts in
the <code>producer_report.qmd</code> document. To avoid confusion, you
should also rename your modified function in the R script and in the
<code>.qmd</code> document.</p>
<p>For example, let’s modify <code><a href="../reference/make_texture_triangle.html">make_texture_triangle()</a></code> to use
different default fonts and colors:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In `plots.R`</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `soils` default arguments:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>make_texture_triangle <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  df,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">primary_color =</span> washi<span class="sc">::</span>washi_pal[[<span class="st">"standard"</span>]][[<span class="st">"red"</span>]],</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">secondary_color =</span> washi<span class="sc">::</span>washi_pal[[<span class="st">"standard"</span>]][[<span class="st">"gray"</span>]],</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">other_color =</span> washi<span class="sc">::</span>washi_pal[[<span class="st">"standard"</span>]][[<span class="st">"tan"</span>]],</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">font_family =</span> <span class="st">"Poppins"</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit to:</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>make_texture_triangle_custom <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  df,</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">primary_color =</span> <span class="st">"blue"</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">secondary_color =</span> <span class="st">"green"</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">other_color =</span> <span class="st">"gray"</span>,</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">font_family =</span> <span class="st">"Arial"</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="co"># In `producer_report.qmd`</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Add this to your setup chunk</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"R/plots.R"</span>))</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Ctrl + F to find and replace all instances of `make_texture_triangle(...)`</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="co"># to `make_texture_triangle_custom(...)`.</span></span></code></pre></div>
<p>Note for Mac OS users: facetted <a href="https://plotly-r.com" class="external-link">plotly</a> strip plots
have <a href="https://github.com/plotly/plotly.R/issues/1224" class="external-link">issues</a>
with overlapping labels. The default <code>panel_spacing</code>
arguments in <code>make_plotly()</code> are optimized for rendering
reports on a Windows machine. If the plots don’t look right on your
machine, try modifying the <code>panel_spacing</code> arguments as
described in the function <a href="https://wa-department-of-agriculture.github.io/soils/reference/make_plotly.html">documentation</a>.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="render-your-reports">3) Render Your Reports<a class="anchor" aria-label="anchor" href="#render-your-reports"></a>
</h2>
<p>You can render reports with the RStudio IDE or programmatically with
the <code>render_report()</code> function.</p>
<div class="section level3">
<h3 id="using-the-rstudio-ide">Using the RStudio IDE<a class="anchor" aria-label="anchor" href="#using-the-rstudio-ide"></a>
</h3>
<p>To generate and preview the report with the default parameters, use
the <code>Render</code> button or keyboard shortcut
(<code>Ctrl + Shift + K</code>). This is the fastest way to render
reports and is great for iterating on content and style. You can check
the <code>Render on Save</code> option to automatically update the
preview whenever you re-render the document. HTML reports will preview
side-by-side with the <code>.qmd</code> file, whereas MS Word documents
will open separately.</p>
<div class="figure">
<img src="images/render.png" style="max-width:80%" alt=""><p class="caption">RStudio Quarto Render button with a dropdown for HTML
and MS Word with Render on Save option checked</p>
</div>
</div>
<div class="section level3">
<h3 id="using-render_report">Using <code>render_report()</code><a class="anchor" aria-label="anchor" href="#using-render_report"></a>
</h3>
<p>You also can render the report programmatically:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get the first producer ID in 2023</span></span>
<span><span class="va">first_producer</span> <span class="op">&lt;-</span> <span class="va">exampleData</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2023</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Render html to the `/inst/reports/` directory</span></span>
<span><span class="fu">render_report</span><span class="op">(</span></span>
<span>  <span class="va">first_producer</span><span class="op">$</span><span class="va">producerId</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2023</span>,</span>
<span>  input <span class="op">=</span> <span class="st">"producer_report.qmd"</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"html"</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/inst/reports/"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The year and producer ID are incorporated in the file name. You can
specify the output directory where you want the reports to be
stored.</p>
<p>When you’re ready to render reports for all producers in your
project, use the <code>render_report()</code> function with
<code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::walk()</a></code>.</p>
<p>To iterate through each producer ID and year to render all reports at
once:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get all unique producer IDs in 2023</span></span>
<span><span class="va">producers</span> <span class="op">&lt;-</span> <span class="va">exampleData</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2023</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">producerId</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Render docx for these 2023 producers to the `/inst/reports/` directory</span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">walk</a></span><span class="op">(</span></span>
<span>  <span class="va">producers</span><span class="op">$</span><span class="va">producerId</span>,</span>
<span>  \<span class="op">(</span><span class="va">producerId</span><span class="op">)</span> <span class="fu">render_report</span><span class="op">(</span></span>
<span>    <span class="va">producerId</span>,</span>
<span>    year <span class="op">=</span> <span class="fl">2023</span>,</span>
<span>    input <span class="op">=</span> <span class="st">"producer_report.qmd"</span>,</span>
<span>    output <span class="op">=</span> <span class="st">"docx"</span>,</span>
<span>    output_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/inst/reports/"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  .progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="final-edits-and-sendoff">4) Final Edits and Sendoff<a class="anchor" aria-label="anchor" href="#final-edits-and-sendoff"></a>
</h2>
<p>All MS Word reports should be reviewed for final formatting before
sending. See the article <a href="https://wa-department-of-agriculture.github.io/soils/articles/docx.html">MS
Word Reports</a> for some of the manual edits we do. Then we use Adobe
Acrobat to convert to <code>.pdf</code> for smaller, more portable files
to send to the producers.</p>
<p>In the future, we would like to create a template using
<code>LaTex</code> to render <code>.pdf</code> reports that have better
controls for floating images around text and fitting tables and plots to
avoid the intermediate <code>.docx</code> step.</p>
<p>See the article <a href="https://wa-department-of-agriculture.github.io/soils/articles/html.html">HTML
Reports</a> for additional notes on the <code>.html</code> reports and
how report recipients should access them.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jadey N Ryan, Molly McIlquham, Kwabena A Sarpong, Leslie Michel, Teal Potter, Deirdre Griffin LaHue, Dani L Gelardi, Washington State Department of Agriculture.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
