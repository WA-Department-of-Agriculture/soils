<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="soils">
<title>Build a Report • soils</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Poppins-0.4.8/font.css" rel="stylesheet">
<link href="../deps/Lato-0.4.8/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Build a Report">
<meta property="og:description" content="soils">
<meta property="og:image" content="https://wa-department-of-agriculture.github.io/soils/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">soils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/get-started.html">Get Started</a>
    <a class="dropdown-item" href="../articles/build-report.html">Build a Report</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Example Reports</h6>
    <a class="dropdown-item" href="../articles/docx.html">MS Word Reports</a>
    <a class="dropdown-item" href="../articles/html.html">HTML Reports</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/WA-Department-of-Agriculture/soils/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Build a Report</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/WA-Department-of-Agriculture/soils/blob/HEAD/vignettes/build-report.Rmd" class="external-link"><code>vignettes/build-report.Rmd</code></a></small>
      <div class="d-none name"><code>build-report.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="quarto-and-markdown-basics">Quarto and Markdown Basics<a class="anchor" aria-label="anchor" href="#quarto-and-markdown-basics"></a>
</h3>
<p>If you’re new to Quarto or markdown, first check out these <a href="https://quarto.org/docs/get-started/hello/rstudio.html" class="external-link">tutorials</a>
and <a href="https://quarto.org/docs/authoring/markdown-basics.html" class="external-link">markdown
basics guide</a>.</p>
</div>
<div class="section level3">
<h3 id="file-paths">File Paths<a class="anchor" aria-label="anchor" href="#file-paths"></a>
</h3>
<p>File paths can be tricky, especially when working in files that use
or source other files in different folders. We use
<code><a href="https://here.r-lib.org//reference/here.html" class="external-link">here::here()</a></code> to build the file path relative to the
directory where the <code>.Rproj</code> file is located. We
<strong>strongly</strong> recommend using the <a href="https://here.r-lib.org/" class="external-link">{here}</a> package to avoid file path
issues.</p>
</div>
<div class="section level2">
<h2 id="workflow">Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a>
</h2>
<p>Sections you will need to change are marked with the text
<code>EDIT:</code>. Follow along with these edits below. Or, you can
search all files in a RStudio project with <code>Ctrl + Shift + F</code>
to find all the files that contain <code>EDIT:</code>.</p>
<div class="section level3">
<h3 id="import-data">1) Import Data<a class="anchor" aria-label="anchor" href="#import-data"></a>
</h3>
<p>{soils} includes an example data set and data dictionary to use as
templates. These files are automatically loaded when you call
<code><a href="https://github.com/WA-Department-of-Agriculture/soils" class="external-link">library(soils)</a></code>, and also are found in the <code>data</code>
folder. They allow you to try out the visualization functions and report
rendering immediately after installing {soils} on your machine.</p>
<div class="section level4">
<h4 id="example-data">Example Data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h4>
<p>Glimpse at the example data structure:</p>
<details open><summary>
Example Data
</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/WA-Department-of-Agriculture/soils" class="external-link">soils</a></span><span class="op">)</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">washi_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 100</span></span>
<span><span class="co">#&gt; Columns: 51</span></span>
<span><span class="co">#&gt; $ year                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2023, 2022, 2022, 2022, 2023, 2022, 2023, 2022,…</span></span>
<span><span class="co">#&gt; $ sample_id              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "23-WUY05-01", "22-RHM05-02", "22-ENR07-02", "2…</span></span>
<span><span class="co">#&gt; $ farm_name              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Farm 150", "Farm 085", "Farm 058", "Farm 061",…</span></span>
<span><span class="co">#&gt; $ producer_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Shanna", "Warren", "Alecia", "Samantha", "Shan…</span></span>
<span><span class="co">#&gt; $ producer_id            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "WUY05", "RHM05", "ENR07", "ZTD04", "WUY05", "B…</span></span>
<span><span class="co">#&gt; $ field_name             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Field 01", "Field 02", "Field 02", "Field 03",…</span></span>
<span><span class="co">#&gt; $ field_id               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 2, 2, 3, 3, 2, 1, 2, 1, 1, 1, 1, 2, 8, 2, 1,…</span></span>
<span><span class="co">#&gt; $ county                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "County 9", "County 18", "County 11", "County 1…</span></span>
<span><span class="co">#&gt; $ crop                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Hay/Silage", "Green Manure", "Vegetable", "Her…</span></span>
<span><span class="co">#&gt; $ texture                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Loamy Sand", "Sandy Loam", "Silt Loam", "Silt …</span></span>
<span><span class="co">#&gt; $ min_c_24hr_mg_c_kg_day <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> NA, NA, NA, 0.14, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span><span class="co">#&gt; $ bd_g_cm3               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.30, 0.88, 1.21, 1.37, 1.22, 1.14, 1.44, 1.24,…</span></span>
<span><span class="co">#&gt; $ pmn_lb_ac              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 67.13, 129.97, 122.17, 95.24, 111.35, 61.92, -7…</span></span>
<span><span class="co">#&gt; $ nh4_n_mg_kg            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.6, 21.6, 8.1, 13.8, 3.9, 12.4, 2.4, 12.4, 2.3…</span></span>
<span><span class="co">#&gt; $ no3_n_mg_kg            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 9.2, 6.1, 25.3, 16.9, 6.7, 4.3, 21.5, 7.4, 2.3,…</span></span>
<span><span class="co">#&gt; $ pmn_mg_kg              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 19.0, 54.1, 37.0, 25.6, 33.6, 20.0, -19.9, 33.6…</span></span>
<span><span class="co">#&gt; $ poxc_mg_kg             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 496, 571, 419, 424, 547, 235, 501, 480, 965, 10…</span></span>
<span><span class="co">#&gt; $ ph                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 6.7, 5.9, 6.3, 6.8, 7.6, 5.5, 5.5, 5.9, 6.3, 6.…</span></span>
<span><span class="co">#&gt; $ ec_mmhos_cm            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.42, 0.05, 0.60, 2.18, 0.60, 0.81, 0.55, 0.34,…</span></span>
<span><span class="co">#&gt; $ k_mg_kg                <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 498, 198, 294, 229, 273, 372, 289, 355, 253, 73…</span></span>
<span><span class="co">#&gt; $ ca_mg_kg               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1380, 780, 1760, 3380, 2820, 1480, 1140, 2080, …</span></span>
<span><span class="co">#&gt; $ mg_mg_kg               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 145.2, 96.8, 266.2, 738.1, 193.6, 229.9, 133.1,…</span></span>
<span><span class="co">#&gt; $ na_mg_kg               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 16.1, 20.7, 20.7, 80.5, 13.8, 16.1, 23.0, 16.1,…</span></span>
<span><span class="co">#&gt; $ cec_meq_100g           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 7.8, 10.5, 13.0, 14.4, 10.1, 12.4, 12.9, 14.8, …</span></span>
<span><span class="co">#&gt; $ b_mg_kg                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.22, 0.09, 0.41, 0.72, 0.25, 0.18, 0.12, 0.21,…</span></span>
<span><span class="co">#&gt; $ cu_mg_kg               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.6, 0.4, 4.2, 1.1, 0.7, 1.0, 0.5, 1.4, 1.1, 0.…</span></span>
<span><span class="co">#&gt; $ fe_mg_kg               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 26, 28, 141, 37, 15, 64, 44, 85, 129, 31, 86, 3…</span></span>
<span><span class="co">#&gt; $ mn_mg_kg               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.5, 2.7, 4.1, 11.5, 1.7, 9.0, 4.4, 17.1, 9.9, …</span></span>
<span><span class="co">#&gt; $ s_mg_kg                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 4.29, 9.41, 26.73, 51.70, 3.29, 4.51, 9.13, 8.2…</span></span>
<span><span class="co">#&gt; $ zn_mg_kg               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.7, 0.8, 4.2, 2.4, 0.8, 0.5, 34.0, 0.9, 7.8, 0…</span></span>
<span><span class="co">#&gt; $ total_c_percent        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.85, 2.88, 1.68, 1.40, 1.65, 1.55, 2.25, 2.37,…</span></span>
<span><span class="co">#&gt; $ total_n_percent        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.16, 0.18, 0.14, 0.12, 0.16, 0.13, 0.15, 0.17,…</span></span>
<span><span class="co">#&gt; $ ace_g_protein_kg_soil  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 6.74, 21.50, 10.90, 5.53, 4.20, 10.30, 7.73, 6.…</span></span>
<span><span class="co">#&gt; $ sand_percent           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 44, 69, 11, 36, 64, 24, 80, 22, 62, 48, 80, 69,…</span></span>
<span><span class="co">#&gt; $ silt_percent           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 23, 21, 79, 51, 33, 62, 16, 57, 26, 45, 14, 27,…</span></span>
<span><span class="co">#&gt; $ clay_percent           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 3, 10, 10, 13, 3, 14, 4, 21, 12, 7, 6, 4, 10, 1…</span></span>
<span><span class="co">#&gt; $ min_c_96hr_mg_c_kg_day <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 35.60, 30.00, 15.00, 67.50, 50.60, 25.50, 30.60…</span></span>
<span><span class="co">#&gt; $ p_olsen_mg_kg          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 15, 37, 73, 30, 8, 33, 27, 29, 40, 16, 19, 11, …</span></span>
<span><span class="co">#&gt; $ wsa_percent            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 88.5, 92.6, 91.3, 94.3, 84.6, 86.6, 86.9, 82.5,…</span></span>
<span><span class="co">#&gt; $ om_percent             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 4.5, 5.8, 2.4, 2.9, 6.7, 3.2, 27.0, 4.2, 7.9, 5…</span></span>
<span><span class="co">#&gt; $ toc_percent            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.85, 2.88, 1.68, 1.40, 1.53, 1.55, 2.25, 2.37,…</span></span>
<span><span class="co">#&gt; $ ca_cmolc_kg            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 6.9, 3.9, 8.8, 16.9, 14.1, 7.4, 5.7, 10.4, 13.4…</span></span>
<span><span class="co">#&gt; $ mg_cmolc_kg            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.2, 0.8, 2.2, 6.1, 1.6, 1.9, 1.1, 1.9, 3.5, 0.…</span></span>
<span><span class="co">#&gt; $ na_cmolc_kg            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.07, 0.09, 0.09, 0.35, 0.06, 0.07, 0.10, 0.07,…</span></span>
<span><span class="co">#&gt; $ whc_in_ft              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.01, 1.08, 2.77, 1.93, 1.28, 2.25, 0.84, 2.14,…</span></span>
<span><span class="co">#&gt; $ moisture_percent       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 17.53, 33.10, 27.97, 25.27, 17.65, 25.97, 14.06…</span></span>
<span><span class="co">#&gt; $ inorganic_c_percent    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> NA, NA, NA, NA, 0.12, NA, NA, NA, NA, NA, NA, N…</span></span>
<span><span class="co">#&gt; $ pmn_no3_n_mg_kg        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 29.0, NA, NA, NA, 42.7, NA, 1.1, NA, 124.0, NA,…</span></span>
<span><span class="co">#&gt; $ pmn_nh4_n_mg_kg        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.8, NA, NA, NA, 1.5, NA, 2.9, NA, 0.7, NA, 14.…</span></span>
<span><span class="co">#&gt; $ longitude              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> -119, -123, -122, -120, -119, -117, -118, -117,…</span></span>
<span><span class="co">#&gt; $ latitude               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 49, 47, 47, 46, 49, 47, 49, 47, 48, 48, 46, 47,…</span></span></code></pre></div>
</details><p>All column names in your data, besides measurements, must be exactly
the same as above.</p>
<p>Each measurement must be in its own column and have the format of
<code>measurement_unit</code> (i.e. <code>Ca_mg.kg</code>). These
measurement column names must match the <code>column_name</code> in your
data dictionary.</p>
</div>
<div class="section level4">
<h4 id="data-dictionary">Data Dictionary<a class="anchor" aria-label="anchor" href="#data-dictionary"></a>
</h4>
<p>The data dictionary is used to group and order the measurements. It
is also used to make nicely formatted labels for display in tables and
plots. The example data dictionary contains <code>UTF-8</code> encoded
superscripts and subscripts.</p>
<p>Save your data dictionary to the <code>data</code> folder as
<code>CSV UTF-8 (Comma delimited) (*.csv)</code> in MS Excel:</p>
<p><img src="../reference/figures/utf-8.png" fig-alt="Data dictionary is saved as CSV UTF-8 (Comma delimited) (*.csv) in MS Excel."></p>
<p>Your data dictionary must have the exact same column names as the
example:</p>
<details open><summary>
Example Data Dictionary
</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">data_dictionary</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 32</span></span>
<span><span class="co">#&gt; Columns: 8</span></span>
<span><span class="co">#&gt; $ measurement_group       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "biological", "biological", "biological", "bio…</span></span>
<span><span class="co">#&gt; $ measurement_group_label <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Biological", "Biological", "Biological", "Bio…</span></span>
<span><span class="co">#&gt; $ column_name             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "om_percent", "min_c_96hr_mg_c_kg_day", "poxc_…</span></span>
<span><span class="co">#&gt; $ measurement_full_name   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Organic Matter", "Potentially Mineralizable C…</span></span>
<span><span class="co">#&gt; $ order                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 2, 3, 4, 5, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5…</span></span>
<span><span class="co">#&gt; $ abbr                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Organic Matter", "Min C", "POXC", "PMN", "ACE…</span></span>
<span><span class="co">#&gt; $ unit                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "%", "mg/kg/day", "ppm", "lbs/ac", "g/kg", "",…</span></span>
<span><span class="co">#&gt; $ abbr_unit               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Organic Matter&lt;br&gt;(%)", "Min C&lt;br&gt;(mg/kg/day)…</span></span></code></pre></div>
</details><ul>
<li>
<code>measurement_group</code> determines how the measurements are
grouped.</li>
<li>
<code>order</code> column specifies the order in which the
measurements appear in each measurement group’s tables and plots.</li>
<li>
<code>column_name</code> is the join key for joining with your
project data.</li>
<li>
<code>abbr</code> and <code>unit</code> are how the measurements are
represented in <code>flextable</code> tables.</li>
<li>
<code>abbr_unit</code> is formatted with HTML line breaks for
<code>ggplot2</code> plots.</li>
</ul>
</div>
<div class="section level4">
<h4 id="your-data">Your Data<a class="anchor" aria-label="anchor" href="#your-data"></a>
</h4>
<p>Once your project data and data dictionary files match the structure
of the above examples, place them in the <code>data</code> folder. Then
make the following changes in the <code>load-data</code> chunk in
<code>01_producer_report.qmd</code>:</p>
<ul>
<li>Change <code>washi-data.csv</code> to the name of your data
file.</li>
<li>Change <code>data-dictionary.csv</code> to the name of your data
dictionary.</li>
<li>Set the order of the <code>measurement_groups</code> to how you
would like them to appear in the report. These group names must match
your data dictionary.</li>
</ul>
<details open><summary>
Load Data Chunk
</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># EDIT: You will need to add your own cleaned lab data to the data</span></span>
<span><span class="co"># folder, using 'washi-data.csv' as a template.</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># 'data-dictionary.csv' must also be updated to match your own</span></span>
<span><span class="co"># data set.</span></span>
<span></span>
<span><span class="co"># Load lab results</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/data/washi-data.csv"</span><span class="op">)</span>,</span>
<span>  check.names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"UTF-8"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">assertr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/assertr/reference/verify.html" class="external-link">verify</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="fu">assertr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/assertr/reference/has_all_names.html" class="external-link">has_all_names</a></span><span class="op">(</span></span>
<span>    <span class="st">"year"</span>,</span>
<span>    <span class="st">"sample_id"</span>,</span>
<span>    <span class="st">"farm_name"</span>,</span>
<span>    <span class="st">"producer_name"</span>,</span>
<span>    <span class="st">"producer_id"</span>,</span>
<span>    <span class="st">"field_name"</span>,</span>
<span>    <span class="st">"field_id"</span>,</span>
<span>    <span class="st">"county"</span>,</span>
<span>    <span class="st">"crop"</span>,</span>
<span>    <span class="st">"texture"</span>,</span>
<span>    <span class="st">"longitude"</span>,</span>
<span>    <span class="st">"latitude"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"`data` is missing required columns."</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data dictionary</span></span>
<span><span class="va">dictionary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/data/data-dictionary.csv"</span><span class="op">)</span>,</span>
<span>  check.names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="co"># set encoding for using subscripts and superscripts</span></span>
<span>  encoding <span class="op">=</span> <span class="st">"UTF-8"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check that the `column_names` column of your dictionary match your data column</span></span>
<span><span class="co"># names</span></span>
<span><span class="fu">assertr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/assertr/reference/assert.html" class="external-link">assert</a></span><span class="op">(</span></span>
<span>  <span class="va">dictionary</span>,</span>
<span>  <span class="fu">assertr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/assertr/reference/in_set.html" class="external-link">in_set</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="va">column_name</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Values in `column_name` of `dictionary` must match the\\</span></span>
<span><span class="st">  column names of `data`."</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># EDIT: set order of measurement_groups</span></span>
<span><span class="co"># this specifies the order of the sections in the report</span></span>
<span><span class="va">measurement_groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"physical"</span>,</span>
<span>  <span class="st">"biological"</span>,</span>
<span>  <span class="st">"chemical"</span>,</span>
<span>  <span class="st">"macro"</span>,</span>
<span>  <span class="st">"micro"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check that the above measurement_groups are in the dictionary.</span></span>
<span><span class="fu">assertr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/assertr/reference/assert.html" class="external-link">assert</a></span><span class="op">(</span><span class="va">dictionary</span>, </span>
<span>                <span class="fu">assertr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/assertr/reference/in_set.html" class="external-link">in_set</a></span><span class="op">(</span><span class="va">measurement_groups</span><span class="op">)</span>,</span>
<span>                <span class="va">measurement_group</span>,</span>
<span>                description <span class="op">=</span> <span class="st">"`dictionary` contains measurement group that\\</span></span>
<span><span class="st">                isn't defined."</span><span class="op">)</span></span></code></pre></div>
</details>
</div>
<div class="section level4">
<h4 id="checking-data-with-assertr">Checking Data with <code>assertr</code><a class="anchor" aria-label="anchor" href="#checking-data-with-assertr"></a>
</h4>
<p>The <code>assertr</code> functions check that your data and
dictionary have the required columns and are consistent with each
other.</p>
<p>To demonstrate troubleshooting with data and dictionary mismatches, I
changed <code>totalN_%</code> to <code>totalN%</code> in the dictionary
<code>column_name</code>. Rendering the report will fail because there
is no column name in <code>data</code> that matches
<code>totalN%</code>:</p>
<pre><code>Quitting from lines 55-119 [load-data] (01_producer_report.qmd)
Error:
! assertr stopped execution
Backtrace:
 1. assertr::assert(...)
 2. assertr (local) error_fun(errors, data = data)
Execution halted</code></pre>
<p>Unfortunately this error message in the Background Jobs tab is not
very helpful. It tells us that the error occurred in lines 55-119 in the
[load-data] chunk.</p>
<p>If we run that chunk in <code>01_producer_report.qmd</code>, we get a
more helpful error message:</p>
<pre><code>Column 'column_name' violates assertion 'assertr::in_set(names(data))' 1 time
    verb redux_fn                    predicate      column index   value
1 assert       NA assertr::in_set(names(data)) column_name    12 totalN%

Error: assertr stopped execution</code></pre>
<p>We can see that the error occurred in
<code>assertr::in_set(names(data))</code> and the problematic value is
<code>totalN%</code>. We could then look at the columns in
<code>data</code> and realize that it should be <code>totalN_%</code>
and correct that value in our <code>dictionary</code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="customize-and-write">2) Customize and Write<a class="anchor" aria-label="anchor" href="#customize-and-write"></a>
</h3>
<p>{soils} was developed to work ‘out of the box’ so you can immediately
install and render an example report. However, this means it will
require customization and content editing to fit your project.</p>
<div class="section level4">
<h4 id="report-metadata-and-options">Report Metadata and Options<a class="anchor" aria-label="anchor" href="#report-metadata-and-options"></a>
</h4>
<p>The report metadata and options are controlled with the YAML and
setup chunk in <code>01_producer_report.qmd</code>.</p>
<p>The first place to start is the YAML (Yet Another Markup Language).
The YAML header is the content sandwiched between three dashes
(<code>---</code>) at the top of the file. It contains document
metadata, parameters, and customization options.</p>
<p>The only fields you need to edit are:</p>
<ul>
<li>
<code>title</code>: The title of the report. Optionally include your
logo above.</li>
<li>
<code>subtitle</code>: Subtitle appears below the title.</li>
<li>
<code>producer_id</code> and <code>year</code>: Default parameter
values that can be found in your data.</li>
</ul>
<pre><code>---
# EDIT: Replace logo.png in images folder with your own and add project name.
title: "![](images/logo.png) Results from PROJECT NAME"
# EDIT: Subtitle right aligned below title.
subtitle: "Fall 2023"
# EDIT: producer_id and year must be a valid combo that exists in your dataset
params:
  producer_id: WUY05
  year: 2023

# Shouldn't need to edit the below values unless you want to customize.
---</code></pre>
<p>Ignore the other YAML fields and values until you would like to
explore other ways of customizing your reports. Learn about the
available YAML fields for <a href="https://quarto.org/docs/reference/formats/html.html" class="external-link">HTML
documents</a> and <a href="https://quarto.org/docs/reference/formats/docx.html" class="external-link">MS Word
documents</a>.</p>
</div>
<div class="section level4">
<h4 id="logo-and-images">Logo and Images<a class="anchor" aria-label="anchor" href="#logo-and-images"></a>
</h4>
<p>The logo that appears at the top of each report is found in the
<code>images</code> subfolder and should be replaced with your
organization’s logo.</p>
<p>Add or change the measurement group icons (i.e.,
<code>biological.png</code>). These icons appear in the section
headers.</p>
</div>
<div class="section level4">
<h4 id="report-content">Report Content<a class="anchor" aria-label="anchor" href="#report-content"></a>
</h4>
<p><code>01_producer_report.qmd</code> uses the Quarto <a href="https://quarto.org/docs/authoring/includes.html" class="external-link"><code>{{&lt; include &gt;}}</code></a>
shortcode to embed static content within the main parameterized
reports.</p>
<p>Edit the content of the following Quarto files to fit your project
and what measurements were taken:</p>
<pre><code>├── 03_project_summary.qmd
├── 04_soil_health_background.qmd
├── 05_physical_measurements.qmd
├── 06_biological_measurements.qmd
├── 07_chemical_measurements.qmd
├── 08_looking_forward.qmd</code></pre>
<p>Under the <code>Project Results</code> heading in
<code>01_producer_report.qmd</code>, update the sample depth:</p>
<blockquote>
<p>All samples were collected from [EDIT: SOIL DEPTH (e.g. 0-6 inches,
or 0-30 cm)].</p>
</blockquote>
<p><code>01_producer_report.qmd</code> calls
<code>02_secion_template.qmd</code> as a child document to generate a
section for each <code>measurement_group</code> defined in the
<code>data-dictionary.csv</code>. You shouldn’t need to edit
<code>02_secion_template.qmd</code> unless you want more advanced
customization.</p>
</div>
<div class="section level4">
<h4 id="style-and-theme">Style and Theme<a class="anchor" aria-label="anchor" href="#style-and-theme"></a>
</h4>
<p>The look and feel of your reports can be customized by changing the
fonts and colors to match your branding. The plot and table outputs are
controlled by the <code>set-fonts-colors</code> chunk in
<code>01_producer_report.qmd</code>. The HTML reports are styled by the
<code>styles.css</code> file and the MS Word reports are styled using
the <code>word-template.docx</code> template file.</p>
<div class="section level5">
<h5 id="set-fonts-and-colors">Set Fonts and Colors<a class="anchor" aria-label="anchor" href="#set-fonts-and-colors"></a>
</h5>
<p>The third chunk in <code>01_producer_report.qmd</code> sets the fonts
and colors to be used in the tables and plots of the report.</p>
<details open><summary><code>set-fonts-colors</code> chunk
</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># EDIT: Replace any font names and colors to match your branding.</span></span>
<span></span>
<span><span class="va">header_font</span> <span class="op">&lt;-</span> <span class="st">"Georgia"</span></span>
<span><span class="va">body_font</span> <span class="op">&lt;-</span> <span class="st">"Arial"</span></span>
<span></span>
<span><span class="co"># Flextable colors -----------------------------------------------------</span></span>
<span></span>
<span><span class="co"># header background color</span></span>
<span><span class="va">header_color</span> <span class="op">&lt;-</span> <span class="st">"#023B2C"</span></span>
<span><span class="co"># header text color</span></span>
<span><span class="va">header_text_color</span> <span class="op">&lt;-</span> <span class="st">"white"</span></span>
<span><span class="co"># body darker background color</span></span>
<span><span class="va">darker_color</span> <span class="op">&lt;-</span> <span class="st">"#ccc29c"</span></span>
<span><span class="co"># body lighter background color</span></span>
<span><span class="va">lighter_color</span> <span class="op">&lt;-</span> <span class="st">"#F2F0E6"</span></span>
<span><span class="co"># border color</span></span>
<span><span class="va">border_color</span> <span class="op">&lt;-</span> <span class="st">"#3E3D3D"</span></span>
<span></span>
<span><span class="co"># Map and plot colors -----------------------------------------------------</span></span>
<span></span>
<span><span class="co"># point color for producer samples</span></span>
<span><span class="va">primary_color</span> <span class="op">&lt;-</span> <span class="st">"#a60f2d"</span></span>
<span><span class="co"># point color for samples in same categories as producer</span></span>
<span><span class="va">secondary_color</span> <span class="op">&lt;-</span> <span class="st">"#3E3D3D"</span></span>
<span><span class="co"># point color for all other samples in project</span></span>
<span><span class="va">other_color</span> <span class="op">&lt;-</span> <span class="st">"#ccc29c"</span></span>
<span></span>
<span><span class="co"># facet strip background color</span></span>
<span><span class="va">strip_color</span> <span class="op">&lt;-</span> <span class="st">"#335c67"</span></span>
<span><span class="co"># facet strip text color</span></span>
<span><span class="va">strip_text_color</span> <span class="op">&lt;-</span> <span class="st">"white"</span></span></code></pre></div>
</details>
</div>
<div class="section level5">
<h5 id="style-sheets">Style Sheets<a class="anchor" aria-label="anchor" href="#style-sheets"></a>
</h5>
<p>The style sheets can be found in the <code>resources</code> directory
and edited to customize the report appearance to match your own
branding.</p>
<div class="section level6">
<h6 id="html">HTML<a class="anchor" aria-label="anchor" href="#html"></a>
</h6>
<p><code>styles.css</code> controls the appearance of HTML reports.</p>
<pre><code>/* Edit these :root variables */
:root {
    --primary-color: #023B2C;
    --secondary-color: #335c67;
    --link-color: #a60f2d;
    --light-color: #F2F0E6;
    --fg-color: white; /* color for text with colored background*/
    --heading-font: "Georgia";
    --body-font: "Arial";
}</code></pre>
</div>
<div class="section level6">
<h6 id="ms-word">MS Word<a class="anchor" aria-label="anchor" href="#ms-word"></a>
</h6>
<p>Open <code>word-template.docx</code> and modify the styles according
to this <a href="https://support.microsoft.com/en-gb/office/customize-or-create-new-styles-d38d6e47-f6fc-48eb-a607-1eb120dec563" class="external-link">Microsoft
documentation</a>.</p>
<p>Learn more about <a href="https://quarto.org/docs/visual-editor/content.html#css-styles" class="external-link">CSS</a>
and <a href="https://quarto.org/docs/output-formats/ms-word-templates.html" class="external-link">MS
Word Style Templates</a>.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="render-your-reports">3) Render Your Reports<a class="anchor" aria-label="anchor" href="#render-your-reports"></a>
</h3>
<p>You can render reports with the RStudio IDE or programmatically with
the <code>render_report()</code> function.</p>
<div class="section level4">
<h4 id="using-the-rstudio-ide">Using the RStudio IDE<a class="anchor" aria-label="anchor" href="#using-the-rstudio-ide"></a>
</h4>
<p>To generate and preview the report with the default parameters, use
the <code>Render</code> button or keyboard shortcut
(<code>Ctrl + Shift + K</code>). This is the fastest way to render
reports and is great for iterating on content and style. You can check
the <code>Render on Save</code> option to automatically update the
preview whenever you save the document. HTML reports will preview
side-by-side with the <code>.qmd</code> file, whereas MS Word documents
will open separately.</p>
<p><img src="../reference/figures/render.png" style="max-width:80%" fig-alt="RStudio Quarto Render button with a dropdown for HTML and MS Word. Render on Save option is checked."></p>
</div>
<div class="section level4">
<h4 id="using-render_reports-r">Using <code>render_reports.R</code><a class="anchor" aria-label="anchor" href="#using-render_reports-r"></a>
</h4>
<p>You also can render all reports at once programmatically by editing
<code>render_reports.R</code> to use the same dataset in the
<code>load-data</code> chunk of <code>01_producer_report.qmd</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># EDIT: Read in the same dataset used in producer_report.qmd.</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/data/washi-data.csv"</span><span class="op">)</span>,</span>
<span>  check.names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"UTF-8"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This script creates a dataframe for <code><a href="https://purrr.tidyverse.org/reference/pmap.html" class="external-link">purrr::pwalk()</a></code>
iteration to render all reports in both HTML and MS Word formats and
moves them to a folder called <code>reports</code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="example-reports">Example Reports<a class="anchor" aria-label="anchor" href="#example-reports"></a>
</h3>
<p>See demo reports rendered directly from this template project:</p>
<div class="section level4">
<h4 id="ms-word-example">
<a href="https://wa-department-of-agriculture.github.io/soils/articles/docx.html">MS
Word Example</a><a class="anchor" aria-label="anchor" href="#ms-word-example"></a>
</h4>
</div>
<div class="section level4">
<h4 id="html-example">
<a href="https://wa-department-of-agriculture.github.io/soils/articles/html.html">HTML
Example</a><a class="anchor" aria-label="anchor" href="#html-example"></a>
</h4>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jadey Ryan, Molly McIlquham, Kwabena A Sarpong, Leslie Michel, Teal Potter, Deirdre Griffin LaHue, Dani L Gelardi, Washington State Department of Agriculture.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
