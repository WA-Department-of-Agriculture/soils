% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/helpers.R
\name{convert_to_numeric}
\alias{convert_to_numeric}
\title{Convert measurement columns to numeric and warn on coercion}
\usage{
convert_to_numeric(data, measurement_cols)
}
\arguments{
\item{data}{A data frame containing both metadata and quantitative
measurement columns.}

\item{measurement_cols}{A character vector of column names to convert to
numeric.}
}
\value{
A data frame where specified measurement columns have been coerced to
numeric.
}
\description{
Intended for use during data ingestion and validation in the reporting
workflow.
}
\details{
Non-numeric values in specified measurement columns, such as character values
commonly used to represent missing or censored measurements (e.g. \code{"ND"},
\code{"<1"}, \code{"-"}, or \code{""}), are coerced to \code{NA}. Warnings are emitted when
non-missing values are coerced to \code{NA}, and when a column contains only \code{NA}
values after coercion, indicating it may be omitted from downstream summaries
or visualizations.
}
\examples{
# Example data
example_data <- data.frame(
  year        = c(2023, 2023, 2024),
  sample_id   = c("S1", "S2", "S3"),
  field_id    = c("A", "A", "B"),
  ph          = c("6.5", "ND", "7.1"),   # partial NA (1 ND -> NA)
  nh4_n_mg_kg = c("12.3", "<1", ""),     # partial NA (2 non-numeric -> NA)
  no3_n_mg_kg = c("NA", "NA", "NA"),     # fully NA
  stringsAsFactors = FALSE
)


# Specify the measurement columns
measurement_cols = c("ph", "nh4_n_mg_kg", "no3_n_mg_kg")

# Convert measurement columns to numeric
clean_data <- convert_to_numeric(example_data, measurement_cols)

}
